# This disk_config is suitable for a server with two >35GB and <70GB hard disks to be put in RAID1.

# 2010-10-04 Chris Dumont. A limitation of FAI 3.2.17 is that
# setup-storage can't set the partiion flags. See hooks/mountdisk.GRUB2
# A bit of a fib: the "bootable:3" option. GPT doesn't have bootable flags. But
# we use it to fool setup-storage into correctly setting BOOT_DEVICE (to
# /dev/sda). Otherwise setup-storage defaults to incorrectly setting
# BOOT_DEVICE to the same as BOOT_PARTITION (to /dev/mapper/vg-root1).

# The 200M partition is for gpt's sake. Somewhat like the old way of having a
# separate /boot but for quite different reasons.

disk_config	disk1	disklabel:gpt	fstabkey:uuid	bootable:3 align-at:8k
primary		-							200M	-	-
primary		swap					2G	swap	rw
primary		-							30G-	-	-

disk_config	disk2	disklabel:gpt	fstabkey:uuid	bootable:3 align-at:8k
primary		-							200M	-	-
primary		swap					2G	swap	rw
primary		-							30G-	-	-

disk_config	raid	fstabkey:uuid
raid1			-							disk1.3,disk2.3	-	-

disk_config	lvm	fstabkey:uuid
vg				vg						md0
vg-root		/							8G	ext3	rw,errors=remount-ro
vg-var		/var					8G-	ext3	rw
vg-data		/data					5G	xfs	rw

