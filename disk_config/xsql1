# This disk_config is suitable for a server with two >70GB and <2TB hard disks to be put in RAID1.

# 2010-10-04 Chris Dumont. A limitation of FAI 3.2.17 is that
# setup-storage can't set the partiion flags. See hooks/mountdisk.GRUB2
# A bit of a fib: the "bootable:3" option. GPT doesn't have bootable flags. But
# we use it to fool setup-storage into correctly setting BOOT_DEVICE (to
# /dev/sda). Otherwise setup-storage defaults to incorrectly setting
# BOOT_DEVICE to the same as BOOT_PARTITION (to /dev/mapper/vg-root1).
# The 1M partition is for gpt's sake. Somewhat like the old way of having a
# separate /boot but for quite different reasons.

# /dev/cciss/c0d0 is a RAID1 of SAS disks for the OS
disk_config	disk1	disklabel:gpt	fstabkey:uuid	bootable:3
primary		-							200M	-	-
primary		swap					8G	swap	rw
primary		-							60G-	-	-

# /dev/cciss/c0d1 is a RAID5, unused

# /dev/cciss/c0d2 is a RAID1 of SATA SSDs for the database
disk_config	disk3	disklabel:gpt	fstabkey:uuid
primary		-							220G-	-	-


disk_config lvm preserve_reinstall:vg-data fstabkey:uuid

vg sas_vg cciss/c0d0p3
sas_vg-root1    /                               9G-10G  ext3    rw,errors=remount-ro
sas_vg-var1     /var                            9G-10G  ext3    rw
sas_vg-root2    /altroot                        9G-10G  ext3    rw
sas_vg-var2     /altroot/var                    9G-10G  ext3    rw
sas_vg-tmp      /tmp                            18G-20G ext3    rw

vg vg cciss/c0d2p1
vg-data         /data                           200G-   xfs     rw,noatime


# Leave some unused space in vg for snapshot volume
# derekp: Don't know if FAI lets you reserve space by omitting the filesystem type
vg-snapreserve  -				10G-20G	-	-

