# 2010-10-04 Chris Dumont. A limitation of FAI 3.2.17 is that
# setup-storage can't set the partiion flags. See hooks/mountdisk.GRUB2
# A bit of a fib: the "bootable:3" option. GPT doesn't have bootable flags. But
# we use it to fool setup-storage into correctly setting BOOT_DEVICE (to
# /dev/sda). Otherwise setup-storage defaults to incorrectly setting
# BOOT_DEVICE to the same as BOOT_PARTITION (to /dev/mapper/vg-root1).
# The 1M partition is for gpt's sake. Somewhat like the old way of having a
# separate /boot but for quite different reasons.

disk_config disk1 disklabel:gpt preserve_reinstall:1 fstabkey:uuid bootable:3
primary		-		200M	msdos	-
primary		swap		8G	swap	rw
primary		-		40G-	-	-

disk_config lvm fstabkey:uuid
vg		vg		disk1.3
vg-root1	/		6G	ext3	rw,errors=remount-ro
vg-var1		/var		5G	ext3	rw
vg-root2	/altroot	6G	ext3	rw
vg-var2		/altroot/var	5G	ext3	rw
vg-data		/data		20G-	xfs	rw

# Leave some unused space in vg for snapshot volume
# derekp: Don't know if FAI lets you reserve space by omitting the filesystem type
vg-snapreserve  -		5G-15G	-	-

# vim: set ts=2 sw=2 et paste:
