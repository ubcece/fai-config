#!/usr/sbin/cfagent -f
# 2007-09-17 Chris Dumont. Allow root to login at GDM.

control:
   any::
   actionsequence = ( editfiles )
   EditFileSize = ( 10000 )

editfiles:
   any::
	{ ${target}/etc/gdm/gdm.conf
		LocateLineMatching "\[security\]"
		IncrementPointer "1"
		AbortAtLineMatching "AllowRoot=True"
		LocateLineMatching "^\[.*"
		IncrementPointer "-1"
		InsertLine "AllowRoot=True"
		UnsetAbort "AllowRoot=True"
		LocateLineMatching "\[greeter\]"
		IncrementPointer "1"
		AbortAtLineMatching "DefaultWelcome=false"
		LocateLineMatching "^\[.*"
		IncrementPointer "-1"
		InsertLine "DefaultWelcome=false"
		InsertLine "Welcome=Welcome to %n"
		# Might need UnsetAbort if further editing needed on this file.
	}
