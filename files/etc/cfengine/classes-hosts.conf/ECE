# classes-hosts.conf    $Rev: 1121 $
# vim: set ts=2 sw=2 et si fdm=indent:

classes:
  check_raid            = ( huey louis dewey msmb1 msql1 )
  vm_host_servers       = ( kakadu khost1 xanadu )
  samba_servers         = ( msmb1 )
  smb_staf_servers      = ( vsmb1 )
  lookup_servers        = ( klookup1 mlookup1 xlookup1 )
  bind9_master_servers  = ( huey )
  bind9_slave_servers   = ( lookup_servers )
  bind9_servers         = ( bind9_master_servers bind9_slave_servers )
  faiservers            = ( huey )
  nis_master_servers    = ( huey )
  nis_slave_servers     = ( lookup_servers )
  ntp_servers           = ( lookup_servers )
  dhcp_servers          = ( lookup_servers )
  matlab_servers        = ( mmatlab1 mmatlab2 )
  flex_servers          = ( mflex1 xflex1 HostRange(vflex,1-3) )
  ssh_servers           = ( HostRange(ssh-linux,1-8) )
  mysql_servers         = ( msql1 xsql1 )
  postgresql90_servers  = ( msql1 xsql1 )
  postgresql_servers    = ( postgresql90_servers )
  database_servers      = ( mysql_servers postgresql_servers )
  dept_web_servers      = ( kweb1 mweb1 xweb1 )
  research_web_servers  = ( kweb2 mweb2 xweb2 )
  student_web_servers   = ( kweb3 mweb3 xweb3 )
  dav_web_servers       = ( kvweb5 )
  acctmgmt_web_servers  = ( msmb1 )
  webmail_servers       = ( mmail1 mmail2 xmail1 )
  mirror_servers        = ( yoho )
  vertxd_servers        = ( mlookup1 xlookup1 )
  web_servers           = ( acctmgmt_web_servers dept_web_servers research_web_servers student_web_servers dav_web_servers webmail_servers mirror_servers )
  servlet_servers       = ( vintr1 )
  imap_servers          = ( mmail1 mmail2 mmail3 xmail1 xmail2 webmail_servers )
  requesttracker_servers = ( xsql1 dept_web_servers )
  ldap_master_servers   = ( huey )
  ldap_slave_servers    = ( xldap1 louis dewey )
  ldap_replicants       = ( ldap_slave_servers lookup_servers )
  freeradius_servers    = ( lookup_servers )
  smtp_servers          = ( kmx1 xmx1 xmx2 plover )
  mta_servers           = ( kmx1 xmx1 xmx2 )
  snmp_servers          = ( fpga2 linux0 linux1 mmatlab1 mmatlab2 scow ssh_servers vb HostRange(vklinux,3-5) yoink ) # Workstations in server rooms.
  servers               = ( baz bind9_servers database_servers dhcp_servers flex_servers foo grunt imap_servers ldap_master_servers ldap_slave_servers lersse0 lookup_servers m342a-pc01 matlab_servers mirror_servers munin_master_servers nis_slave_servers psserv qux samba_servers scow servlet_servers smtp_servers ssh_servers thud vertxd_servers vm_host_servers web_servers )
  munin_master_servers  = ( scow )
  munin_nodes           = ( servers snmp_servers )
  git_servers           = ( research_web_servers )
  uptrack_clients       = ( ssh_servers )
  clients_am            = ( HostRange(mesbah-pc,01-04) )
  clients_bisicl        = ( morty node01 node02 node03 node04 )
  clients_comm          = ( blake HostRange(commlab,01-36) -commlab05 -commlab08 -commlab10 -commlab11 -commlab13 -commlab25 -commlab26 -commlab31 gauss golomb HostRange(lampe,1-8) mach1 mach9 mach13 HostRange(rschober,01-13) HostRange(rs-dell,01-02) HostRange(rs-dell,06-10) shannon HostRange(shannon,3-5) vb vijay01 vijay02 vleung05 vleung07 HostRange(vleung,11-22) HostRange(vwong-pc,01-05) )
  clients_cose          = ( gube HostRange(ito,1-8) -ito2 HostRange(karthik-pc,02-09) )
  clients_hct           = ( copper cubee2 fels2 hct-pc01 interface06 seal-hct )
  clients_lc            = ( munday aznoor photonics )
  clients_nano          = ( atwell psserv walus8 nano-mac03 )
  clients_rcl           = ( purang1 purang4 rohling5 tims-pc12 )
  clients_spmg          = ( barney bci01 burns isp-pc01 jackie lisa kramer maggie marge milhouse ned scratchy smithers spmg-pc01 vikram vikramdell vklab1 vklab2 vklab3 vklab11 vklab12 HostRange(vklinux,2-5) ward-dell03 ward-dell04 )
  clients_staff         = ( andreyv-pc03 robr-pc01 bc1-n1 derek frink ibofh linux0 magilla roozmac roozmacbk swashplate testing testrig vsmb1 wankel HostRange(penguest,1-3) )
  clients_ugrad         = ( fixprofile m112-402ug-pc trirotor )
  clients_vlsi          = ( anan andre cairo clef1-bc keikhosr-pc damavand HostRange(fiz,0-4) delaram delbar delkash dellped fpga2 fpga10 fpga13 g32 ghoo gould mirabbasi2 shuttle-pc tazeh wolastook HostRange(xena,1-12) -xena4 HostRange(zark,1-10) )
  clients               = ( clients_am clients_bisicl clients_comm clients_cose clients_hct clients_lc clients_nano clients_rcl clients_spmg clients_staff clients_ugrad clients_vlsi )
  autofs_clients        = ( clients flex_servers lersse0 database_servers matlab_servers requesttracker_servers samba_servers smtp_servers ssh_servers web_servers imap_servers yoho )
  ldap_clients          = ( huey autofs_clients )
  print_almanac         = ( HostRange(commlab,01-36) -commlab05 -commlab08 -commlab10 -commlab11 -commlab13 -commlab17 -commlab25 -commlab26 -commlab31 -commlab32 HostRange(lampe,1-8) HostRange(rschober,01-13) HostRange(rs-dell,01-02) HostRange(rs-dell,06-10) HostRange(vwong-pc,01-05) vleung05 HostRange(vleung,11-22) )
  print_cursive         = ( commlab15 commlab17 commlab19 commlab20 commlab32 HostRange(shannon,3-5) wankel rs-dell01 )
  print_fels_lp01       = ( interface06 cubee2 fels2 seal-hct hct-pc01 copper )
  print_figaro          = ( print_almanac )
  print_gothic          = ( print_almanac )
  print_karthik_lp01    = ( clients_cose )
  print_mesbah_lp01     = ( clients_am )
  print_momiji          = ( blake gauss golomb shannon )
  print_mundo           = ( HostRange(vklab,1-12) HostRange(vklinux,2-5) )
  print_papyrus_vk      = ( HostRange(vklinux,3-5) )
  print_print4060       = ( clients_lc )
  print_socp            = ( clients_vlsi -fpga2 )
  print_socp2           = ( print_socp )
  print_socp3           = ( print_socp )
  print_socp4           = ( print_socp )
  print_tabula          = ( fiz2 )
  print_tong            = ( vijay01 vijay02 )
  print_x310            = ( vleung07 ward-dell03 ward-dell04 )
  print_x518            = ( interface06 cubee2 seal-hct )
  has_printer           = ( print_almanac print_cursive print_fels_lp01 print_figaro print_gothic print_karthik_lp01 print_mesbah_lp01 print_momiji print_mundo print_papyrus_vk print_print4060 print_socp print_socp2 print_socp3 print_socp4 print_tong print_x310 print_x518 )
  netdata_consumers     = ( bind9_master_servers bind9_slave_servers munin_master_servers smtp_servers )
  cmc_stable     = ( clients_lc ssh_servers )

  # Hardware

  # Virtualization guest OS
  bochs_guests          = ( `/bin/sh -c '/usr/sbin/dmidecode -s system-product-name | /bin/grep -qF Bochs' 2>/dev/null` )
  vz_containers         = ( `/usr/bin/test -d /proc/vz -a ! -d /proc/vz/container` )

  hp_ilo_0x0408         = ( `/bin/sh -c '/usr/bin/lspci -nm | /usr/bin/awk "\\$3 ~ /0e11/ && \\$4 ~ /b204/ && \\$5 ~ /-r01/ { X=1 } END { exit !X }"' 2>/dev/null` )
  hp_ilo                = ( `/bin/sh -c '/usr/bin/lspci | /bin/grep -q "\<iLO\|Integrated Lights Out\s*Processor"' 2>/dev/null` )
  ibm_bmc               = ( `/bin/sh -c '/usr/sbin/dmidecode -t11 | /bin/grep -q "IBM BaseBoard Management Controller"' 2>/dev/null` )
  hwraid                = ( `/bin/sh -c '/usr/bin/lspci -nm | /usr/bin/awk "\\$2 ~ /0104/ { X=1 } END { exit !X }"' 2>/dev/null` )
  hwraid_3ware          = ( `/bin/sh -c '/usr/bin/lspci -nm | /usr/bin/awk "\\$3 ~ /13c1/ { X=1 } END { exit !X }"' 2>/dev/null` )
  hwraid_ips            = ( `/bin/sh -c '/sbin/depmod -m && /usr/bin/pcimodules | /bin/grep -qxF ips' 2>/dev/null` )
  hwraid_hpsa           = ( `/bin/sh -c '/usr/bin/lspci | /bin/grep -qF "Smart Array Controller"' 2>/dev/null` )

  # Linux kernel bugs
  cve_2009_2692         = ( `/usr/bin/test $(kernel_date_num) -lt 20090812` )
  cve_2009_3002         = ( `/usr/bin/test $(kernel_vers_num) -lt 002006032` )
  cve_2009_3547         = ( `/usr/bin/test $(kernel_date_num) -lt 20091103` )
  cve_2010_3081         = ( `/usr/bin/test $(kernel_date_num) -lt 20100916` )
  cve_2010_3904         = ( `/usr/bin/test $(kernel_date_num) -lt 20101020` )

  # Linux kernel module naming
  pre_ip_nf             = ( `/usr/bin/test $(kernel_vers_num) -lt 002006023` )

  # Hostnames with a dash are problematic.
  tims_pc12             = ( tims-pc12 )

  debian_3|debian_4|debian_5::
    nis_clients         = ( autofs_clients )
